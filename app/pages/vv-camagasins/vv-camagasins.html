<!--
  Generated template for the VvCamagasinsPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-navbar primary *navbar>
    <ion-buttons left>
        <button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
    </ion-buttons>
    <ion-title>Chiffres Magasins</ion-title>
    <ion-buttons end>
        <button (click)="showCA()" *ngIf="(enseigne!=null)  || (enseigne!=undefined)">
            <ion-icon name="refresh"></ion-icon>
        </button>
    </ion-buttons>
</ion-navbar>
<ion-content class="vv-camagasins">
    <ion-list>
        <ion-item>
            <ion-icon name="calendar" item-left></ion-icon>
            <ion-label>Date</ion-label>
            <ion-select  [(ngModel)]="seljour">
                <ion-option *ngFor="#jrs of lesjours" value="{{jrs}}" checked="{{(jrs===jour)}}">{{jrs}}</ion-option>
            </ion-select>
            <ion-select [(ngModel)]="selmois">
                <ion-option *ngFor="#ms of lesmois" value="{{lesmois.indexOf(ms)+1}}" checked="{{(lesmois.indexOf(ms))==(mois)}}">{{ms.toUpperCase()}}</ion-option>
            </ion-select>
            <ion-select [(ngModel)]="selannee">
                <ion-option *ngFor="#ans of lesannees" value="{{ans}}" checked="{{(ans===annee)}}">{{ans}}</ion-option>
            </ion-select>
            
        </ion-item>
        <ion-item>
            <ion-icon name="home" item-left></ion-icon>
            <ion-label>Enseigne</ion-label>
            <ion-select [(ngModel)]="enseigne" (change)="doSelect($event)">
                <ion-option value="GEANT">GEANT</ion-option>
                <ion-option value="CASINO">CASINO</ion-option>
                <ion-option value="ECOMAX MQ">ECOMAX MARTINIQUE</ion-option>
                <ion-option value="ECOMAX GP">ECOMAX GUADELOUPE</ion-option>
                <ion-option value="ECOMAX CY">ECOMAX GUYANE</ion-option>
            </ion-select>
        </ion-item>
        
       <!-- <button primary  block (click)="showCA()" *ngIf="(enseigne!=null)  || (enseigne!=undefined)">Voir à date</button>-->
    </ion-list>
    <ion-list>
        <ion-item *ngIf="(nbmag > 1) && (enseigne!='GEANT')">
            <h2><font size="5">Total = </font><font size="6"><b danger>{{totalca.toFixed(2)}} €</b></font></h2>
        </ion-item>
        
        <ion-item *ngFor="#mag of magasins" (click)="magSelected(mag)">
            <h2><font size="4"><b primary>{{mag.nommag}}</b></font></h2>
            <h1><b>{{mag.camag}} €</b></h1>
            <p right><b>Nb Client = {{mag.climag}}</b></p>
        </ion-item>
            
        <ion-item *ngIf="(nbmag > 1) && (enseigne=='GEANT')">
            <h2><font size="5">Total = </font><font size="6"><b danger>{{totalca.toFixed(2)}} €</b></font></h2>
        </ion-item>
    </ion-list>
</ion-content>